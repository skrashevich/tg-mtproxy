# MTProxy Telegram Bot

–ë–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ MTProto proxy –¥–ª—è Telegram.
–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Stars ‚Äî –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π, –ò–ü, –∏ –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º.

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –±–æ—Ç—É ‚Üí –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–∞—Ä–∏—Ñ ‚Üí –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç Stars ‚Üí –ø–æ–ª—É—á–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –ø—Ä–æ–∫—Å–∏
- –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ MTProxy
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç RAM, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∏—Å—Ç—ë–∫—à–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- –ê–ª–µ—Ä—Ç–∏—Ç –∞–¥–º–∏–Ω–∞ –ø—Ä–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Telegram    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∏‚îÇ  Node.js Bot  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∏‚îÇ  Docker: MTProxy     ‚îÇ
‚îÇ  Users       ‚îÇ‚óÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  (telegraf)   ‚îÇ‚óÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  (telegrammessenger/ ‚îÇ
‚îÇ              ‚îÇ     ‚îÇ  SQLite DB    ‚îÇ     ‚îÇ   proxy)             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
                    Cron Jobs:
                    - –ü—Ä–æ–≤–µ—Ä–∫–∞ expire (30 –º–∏–Ω)
                    - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ RAM (5 –º–∏–Ω)
                    - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ proxy (1/–¥–µ–Ω—å)
```

**–û–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** MTProxy –Ω–∞ –æ–¥–Ω–æ–º –ø–æ—Ä—Ç—É (443).
–ö–∞–∂–¥–æ–º—É —é–∑–µ—Ä—É ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π secret. –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `SECRET=aaa,bbb,ccc`.
–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ —é–∑–µ—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç—Å—è (~2 —Å–µ–∫).

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- VDS: Ubuntu 22+, 1 –ì–ë RAM, 1 vCPU
- Docker
- Node.js 18+
- –û—Ç–∫—Ä—ã—Ç—ã–π –ø–æ—Ä—Ç 443

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π/–∑–∞–≥—Ä—É–∑–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞ VDS
scp -r mtproxy-bot/ user@your-server:~/

# 2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd mtproxy-bot
chmod +x setup.sh
./setup.sh

# 3. –ó–∞–ø–æ–ª–Ω–∏ .env
nano .env

# 4. –ó–∞–ø—É—Å—Ç–∏
sudo systemctl start mtproxy-bot

# 5. –ü—Ä–æ–≤–µ—Ä—å
sudo journalctl -u mtproxy-bot -f
```

## –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Stars

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ö—É–ø–∏—Ç—å" –≤ –±–æ—Ç–µ
2. Telegram –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω—É—é —Ñ–æ—Ä–º—É –æ–ø–ª–∞—Ç—ã Stars
3. –Æ–∑–µ—Ä –ø–ª–∞—Ç–∏—Ç Stars (–∫–æ—Ç–æ—Ä—ã–µ –∫—É–ø–∏–ª —á–µ—Ä–µ–∑ Apple Pay / Google Pay / @PremiumBot)
4. –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–∫—Å–∏ –≤—ã–¥–∞—ë—Ç—Å—è –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ

**–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏:**
- Stars ‚Üí Toncoin —á–µ—Ä–µ–∑ Fragment (fragment.com)
- Toncoin ‚Üí —Ä—É–±–ª–∏ —á–µ—Ä–µ–∑ –ª—é–±—É—é –∫—Ä–∏–ø—Ç–æ-–±–∏—Ä–∂—É

**–î–ª—è —ç—Ç–æ–≥–æ –ù–ï –Ω—É–∂–Ω–æ:**
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –ò–ü/—Å–∞–º–æ–∑–∞–Ω—è—Ç—ã–π (–¥–ª—è —Å—Ç–∞—Ä—Ç–∞)
- –ü–æ–¥–∫–ª—é—á–∞—Ç—å –ø–ª–∞—Ç—ë–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- –ü–æ–ª—É—á–∞—Ç—å provider_token ‚Äî –¥–ª—è Stars –æ–Ω –ø—É—Å—Ç–æ–π

## –¢–∞—Ä–∏—Ñ—ã

| –¢–∞—Ä–∏—Ñ | Stars | –î–Ω–∏ | ~–†—É–±–ª–µ–π |
|-------|-------|-----|---------|
| ‚ö° 1 –¥–µ–Ω—å | 8 | 1 | ~15 |
| üîµ 7 –¥–Ω–µ–π | 25 | 7 | ~50 |
| üü£ 30 –¥–Ω–µ–π | 50 | 30 | ~100 |

1 Star ‚âà 1.8-2.4 —Ä—É–± –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ —á–µ—Ä–µ–∑ @PremiumBot.

–ò–∑–º–µ–Ω–∏—Ç—å —Ç–∞—Ä–∏—Ñ—ã: `src/tariffs.ts`

–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç—Ä–∏–∞–ª –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `.env`:
- `TRIAL_DAYS` ‚Äî –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –¥–Ω—è—Ö (`0` = –≤—ã–∫–ª—é—á–µ–Ω)
- `TRIAL_MAX_CONNECTIONS` ‚Äî –ª–∏–º–∏—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ —Ç—Ä–∏–∞–ª–µ
- `TRIAL_NOTIFY_ADMIN` ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É –æ –≤—ã–¥–∞—á–µ —Ç—Ä–∏–∞–ª–∞ (`1`/`0`)

## –õ–∏–º–∏—Ç—ã –¥–ª—è 1 –ì–ë RAM + 200 –ú–±–∏—Ç

- **RAM:** ~50 –∞–∫—Ç–∏–≤–Ω—ã—Ö —é–∑–µ—Ä–æ–≤ ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–∞–∫—Å–∏–º—É–º
- **–ö–∞–Ω–∞–ª 200 –ú–±–∏—Ç:** ~100 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —é–∑–µ—Ä–æ–≤ (Telegram –µ—Å—Ç ~1-2 –ú–±–∏—Ç –Ω–∞ —é–∑–µ—Ä–∞ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏)
- –ë—É—Ç—ã–ª–æ—á–Ω–æ–µ –≥–æ—Ä–ª—ã—à–∫–æ —Å–µ–π—á–∞—Å ‚Äî RAM, –Ω–µ –∫–∞–Ω–∞–ª
- –ú—è–≥–∫–∏–π –ª–∏–º–∏—Ç (40) ‚Äî –∞–ª–µ—Ä—Ç –∞–¥–º–∏–Ω—É
- –ñ—ë—Å—Ç–∫–∏–π –ª–∏–º–∏—Ç (50) ‚Äî –ø—Ä–æ–¥–∞–∂–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
- RAM > 80% ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- RAM > 90% ‚Äî –∞–≤—Ç–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–¥–∞–∂

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- `/start` ‚Äî –Ω–∞—á–∞–ª–æ
- `/tariffs` ‚Äî –≤—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞
- `/trial` ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω)
- `/link` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É
- `/status` ‚Äî —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏
- `/help` ‚Äî —Å–ø—Ä–∞–≤–∫–∞

**–î–ª—è –∞–¥–º–∏–Ω–∞:**
- `/admin` ‚Äî –ø–∞–Ω–µ–ª—å
- `/stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/users` ‚Äî –∞–∫—Ç–∏–≤–Ω—ã–µ —é–∑–µ—Ä—ã
- `/health` ‚Äî –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–µ—Ä–∞
- `/block <id>` ‚Äî –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
- `/restart_proxy` ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å MTProxy
- `/toggle_sales` ‚Äî –≤–∫–ª/–≤—ã–∫–ª –ø—Ä–æ–¥–∞–∂–∏
- `/toggle_trial_notify` ‚Äî –≤–∫–ª/–≤—ã–∫–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—ã–¥–∞—á–µ —Ç—Ä–∏–∞–ª–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
mtproxy-bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ bot.ts            # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ database.ts       # SQLite (better-sqlite3)
‚îÇ   ‚îú‚îÄ‚îÄ proxy-manager.ts  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker MTProxy
‚îÇ   ‚îî‚îÄ‚îÄ tariffs.ts        # –ö–æ–Ω—Ñ–∏–≥ —Ç–∞—Ä–∏—Ñ–æ–≤
‚îú‚îÄ‚îÄ data/                 # SQLite –ë–î (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ .env                  # –ö–æ–Ω—Ñ–∏–≥ (–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å!)
‚îú‚îÄ‚îÄ .env.example          # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥–∞
‚îú‚îÄ‚îÄ setup.sh              # –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tsconfig.json
```

## FAQ

**Q: –ü–æ—á–µ–º—É –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –Ω–∞ —é–∑–µ—Ä–∞?**
–ù–∞ 1 –ì–ë RAM –∫–∞–∂–¥—ã–π Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –µ—Å—Ç ~30-50 –ú–ë. –ü—Ä–∏ 50 —é–∑–µ—Ä–∞—Ö —ç—Ç–æ 1.5-2.5 –ì–ë ‚Äî –Ω–µ –≤–ª–µ–∑–µ—Ç.
–û–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –µ—Å—Ç ~30-50 –ú–ë –Ω–∞ –≤—Å–µ—Ö.

**Q: –ß—Ç–æ –±—É–¥–µ—Ç –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞?**
–Æ–∑–µ—Ä—ã –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ ~5-10 —Å–µ–∫. Telegram –∫–ª–∏–µ–Ω—Ç —ç—Ç–æ —É–º–µ–µ—Ç.

**Q: –ê –µ—Å–ª–∏ —é–∑–µ—Ä —à–∞—Ä–∏—Ç —Å—Å—ã–ª–∫—É?**
MTProxy –Ω–µ —Ä–∞–∑–ª–∏—á–∞–µ—Ç —é–∑–µ—Ä–æ–≤ –ø–æ —Å–µ–∫—Ä–µ—Ç—É –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π.
–≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —à–∞—Ä–∏–Ω–≥ –Ω–µ–ª—å–∑—è.
–ù–æ: –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç—Ä–∏–∞–ª + –Ω–∏–∑–∫–∞—è —Ü–µ–Ω–∞ –¥–µ–ª–∞—é—Ç —à–∞—Ä–∏–Ω–≥ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º.

**Q: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ?**
–ö–æ–≥–¥–∞ –¥–æ—Ä–∞—Å—Ç—ë—à—å –¥–æ 50+ —é–∑–µ—Ä–æ–≤ ‚Äî –±–µ—Ä–∏ VDS –ø–æ–±–æ–ª—å—à–µ (2+ –ì–ë RAM) –∏ –ø–æ–¥–Ω–∏–º–∏ –ª–∏–º–∏—Ç—ã –≤ .env.
